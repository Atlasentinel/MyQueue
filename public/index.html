<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="/styles/style.css" />
  <title>MyQueue</title>
</head>

<body>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qs/6.11.0/qs.min.js"
    integrity="sha512-/l6vieC+YxaZywUhmqs++8uF9DeMvJE61ua5g+UK0TuHZ4TkTgB1Gm1n0NiA86uEOM9JJ6JUwyR0hboKO0fCng=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="/socket.io/socket.io.js"></script>
  <script>
    var socket = io();

    
    const idKey = Math.random().toString(10).substr(5, 5);

    function getPseudo(){
      var pseudo = document.getElementById('pseudo').value;
      if (pseudo == '') pseudo = "Guest";
      socket.emit('pseudo', pseudo);
      console.log(idKey);
    }

    var send = function () {
      getPseudo();
      // GÃ©nÃ¨re une clÃ© unique 
        socket.emit('create-room',{id: idKey,name: pseudo});
        window.location.href = "room.html?room=" + idKey + pseudo + "&pseudo=" + pseudo;
      }

      var join_room = function() {
        getPseudo();
        socket.emit('join-room',{id: idKey,name: pseudo});
        window.location.href = "room.html?room=" + idKey + pseudo + "&pseudo=" + pseudo;
      }
      
        
 



  </script>
  <header>
    <nav>
      <ul class="ulangue">
        <li class="Langue">
          <select>
            <option value="">Langue</option>
            <option value="English">English</option>
            <option value="FranÃ§ais">FranÃ§ais</option>
          </select>
        </li>
        <li class="Update">ðŸ”” New Update ðŸ””</li>
        <div class="popup">
          <div class="popup-container">
            <h1>Version 1.0</h1>
            <h3><u>Quoi de neuf : </u></h3>
            <ul class="brip">
              <li>J'ai Ã  finir le css</li>
              <li>Gestion des liens de soundcloud</li>
              <li>Gestion des liens de spotify</li>
            </ul>
          </div>

          <span class="closepup">Okay</span>
        </div>
      </ul>
    </nav>
  </header>
  <div class="main-content">
    <p class="title-content">MyQueue</p>
    <img src="images/test.jpg" id="avatar" class="avatar" />
    <div class="pseudo">
      <div class="pseudo-content">
        <form style="height: 40px" action="javascript:send()">
          <input id="pseudo" class="pseudo-input" type="text" placeholder="Surnom" maxlength="20" />
        </form>
        <span class="letter-counter">
          <span class="count">20</span> letters</span>
      </div>

      <div class="room-btn">
        <span id="create-room" class="create-room" onclick="send()">CRÃ‰ER UNE ROOM</span>
        <span onclick="join_room()" class="">REJOINDRE LA ROOM</span>
        <span  class="join-room">REJOINDRE UN ROOM</span>
      </div>
    </div>
  </div>
  <div class="footer">
    <p>MyQueue &copy; - 2022 Tous Droits RÃ©serves</p>
  </div>

  <script src="js/main.js"></script>
</body>

</html>